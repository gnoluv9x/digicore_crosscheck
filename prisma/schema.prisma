generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model crosscheck {
  id           Int            @id @default(autoincrement())
  fileName     String         @map("file_name") @db.VarChar(200)
  filePath     String         @map("file_path") @db.VarChar(100)
  totalTrans   Int?           @default(0) @map("total_trans")
  adminId      Int            @map("admin_id")
  createdAt    DateTime       @default(now()) @map("created_at") @db.Timestamp(0)
  transactions transactions[]
}

model transactions {
  id                  Int                                 @id @default(autoincrement())
  orderId             Int                                 @unique @map("order_id")
  phoneNumber         String                              @map("phone_number") @db.VarChar(20)
  productName         String                              @map("product_name") @db.VarChar(100)
  productType         transactions_product_type?          @map("product_type")
  packageRegisterType transactions_package_register_type? @map("package_register_type")
  orderStatus         transactions_order_status           @map("order_status")
  provider            transactions_provider
  totalPrice          Float?                              @map("total_price") @db.Float
  commissionAgent     Float?                              @map("commission_agent") @db.Float
  commissionSubAgent  Float?                              @map("commission_sub_agent") @db.Float
  agentId             Int?                                @map("agent_id")
  subAgentId          Int?                                @map("sub_agent_id")
  date                DateTime?                           @db.Timestamp(0)
  successDate         DateTime?                           @map("success_date") @db.Timestamp(0)
  crossCheckId        Int?                                @map("cross_check_id")
  crossCheckStatus    transactions_cross_check_status?    @map("cross_check_status")
  crossCheckDate      DateTime?                           @map("cross_check_date") @db.Timestamp(0)
  createdAt           DateTime                            @default(now()) @map("created_at") @db.Timestamp(0)
  crosscheck          crosscheck?                         @relation(fields: [crossCheckId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "fk_crosscheck")

  @@index([crossCheckId], map: "fk_crosscheck")
}

enum transactions_product_type {
  packagemobile
  card
  datacode
  sim
}

enum transactions_package_register_type {
  otp
  sms
}

enum transactions_order_status {
  success
  pending
  fail
}

enum transactions_provider {
  mobifone
  vinaphone
  viettel
}

enum transactions_cross_check_status {
  fail    @map("0")
  success @map("1")
}
